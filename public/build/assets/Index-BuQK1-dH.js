import{d as O,G as I,H as M,u as e,c as m,n as j,I as T,o as u,D as P,E as U,a as s,h as z,w as a,b as l,j as _,g as o,C,F as k,r as S,e as y,t as d}from"./app-BmU5UYzF.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkgE8rxM.js";import{d as E}from"./index-C4J_hXM0.js";import{_ as R,a as L,b as D,c as f,d as q,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-CNObHt1J.js";import{a as A,b as K,c as G,d as H,e as Q,_ as J}from"./SelectValue.vue_vue_type_script_setup_true_lang-B7AZrX7D.js";import{_ as W,E as X}from"./index-gt1S-KBd.js";import{c as Y,_ as p}from"./index-DYPtvS4u.js";import{_ as Z,a as ee,b as te,c as se,d as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cgb1bnpF.js";import{_ as re,a as le}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cr2-_Hie.js";import{_ as oe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BGhCNOqs.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-ltxAgRyv.js";import{u as de}from"./index-Cnsj7r6d.js";import{c as ie}from"./createLucideIcon-C1RCk4_V.js";import"./VisuallyHidden-CZv-8Nwz.js";import"./useForwardExpose-DBmtGISG.js";import"./useForwardPropsEmits-D74H8ojV.js";import"./users-CYa9NsOM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./check-BCO8hya3.js";import"./useFormControl-Be_sUwht.js";const h=ie("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ne=O({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(i,{emit:x}){const n=i,g=de(n,"modelValue",x,{passive:!0,defaultValue:n.defaultValue});return(V,b)=>I((u(),m("textarea",{"onUpdate:modelValue":b[0]||(b[0]=w=>T(g)?g.value=w:null),"data-slot":"textarea",class:j(e(Y)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n.class))},null,2)),[[M,e(g)]])}}),ue={class:"flex h-full flex-1 flex-col gap-10 overflow-x-auto p-10"},me={class:"flex items-center justify-between"},fe={class:"grid gap-6 py-4"},ce={class:"grid gap-3"},_e={class:"flex items-center justify-between w-full"},ge={class:"text-muted-foreground ml-4"},pe={key:0,class:"text-sm text-red-500"},xe={class:"grid gap-3"},be={key:0,class:"text-sm text-red-500"},ve={class:"rounded-2xl border border-border bg-card shadow-sm p-4"},ye={class:"font-medium text-foreground"},we=["title"],ke={key:0,class:"text-sm text-foreground"},he={key:1,class:"text-sm text-muted-foreground italic"},$e={class:"text-sm"},Ve={class:"font-medium text-foreground"},Ce={class:"text-xs text-muted-foreground"},Se={key:0,class:"border-t border-border p-4 flex items-center justify-between text-sm text-muted-foreground"},De={class:"flex items-center gap-2"},Ne={class:"px-3"},Oe={key:0,class:"flex flex-col items-center justify-center py-16 text-center"},je={class:"mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-muted"},Ye=O({__name:"Index",props:{orders:{},services:{}},setup(i){const x=P(!1),n=U({service_id:"",special_instructions:""}),$=[{title:"Dashboard",href:E().url},{title:"Client Orders",href:"/orders"}],g={submitted:{label:"Submitted",class:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},under_review:{label:"Under Review",class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"},in_production:{label:"In Production",class:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"},quality_check:{label:"Quality Check",class:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400"},ready_for_delivery:{label:"Ready",class:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},completed:{label:"Completed",class:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},V=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=v=>{const t=Math.ceil((new Date(v).getTime()-new Date().getTime())/864e5);return t>0?`${t} days`:"Overdue"},w=()=>{n.post("/orders",{onSuccess:()=>{x.value=!1,n.reset()}})};return(v,t)=>(u(),m(k,null,[s(e(z),{title:"Client Orders"}),s(B,{breadcrumbs:$},{default:a(()=>[l("div",ue,[l("div",me,[t[10]||(t[10]=l("div",null,[l("h1",{class:"text-3xl font-bold text-foreground"},"Client Orders"),l("p",{class:"text-muted-foreground mt-1"}," Track and manage your laboratory orders ")],-1)),s(e(Z),{open:x.value,"onUpdate:open":t[3]||(t[3]=r=>x.value=r)},{default:a(()=>[s(e(oe),{"as-child":""},{default:a(()=>[s(e(p),{class:"gap-2"},{default:a(()=>[s(e(h),{class:"h-4 w-4"}),t[4]||(t[4]=o(" New Order ",-1))]),_:1})]),_:1}),s(e(ee),{class:"sm:max-w-[500px]",onInteractOutside:t[2]||(t[2]=C(()=>{},["prevent"]))},{default:a(()=>[l("form",{onSubmit:C(w,["prevent"])},[s(e(te),null,{default:a(()=>[s(e(se),null,{default:a(()=>[...t[5]||(t[5]=[o("Create New Order",-1)])]),_:1}),s(e(ae),null,{default:a(()=>[...t[6]||(t[6]=[o(" Select a service and add any special instructions for your order. ",-1)])]),_:1})]),_:1}),l("div",fe,[l("div",ce,[s(e(N),{for:"service"},{default:a(()=>[...t[7]||(t[7]=[o("Service *",-1)])]),_:1}),s(e(A),{modelValue:e(n).service_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).service_id=r),required:""},{default:a(()=>[s(e(K),{id:"service"},{default:a(()=>[s(e(G),{placeholder:"Select a service"})]),_:1}),s(e(H),null,{default:a(()=>[(u(!0),m(k,null,S(i.services,r=>(u(),y(e(Q),{key:r.id,value:r.id.toString()},{default:a(()=>[l("div",_e,[l("span",null,d(r.name),1),l("span",ge," Ksh "+d(parseFloat(r.base_price).toFixed(2)),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(n).errors.service_id?(u(),m("p",pe,d(e(n).errors.service_id),1)):_("",!0)]),l("div",xe,[s(e(N),{for:"instructions"},{default:a(()=>[...t[8]||(t[8]=[o("Special Instructions",-1)])]),_:1}),s(e(ne),{id:"instructions",modelValue:e(n).special_instructions,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).special_instructions=r),placeholder:"e.g., Shade A2, margin chamfer, rush order...",class:"min-h-[100px]"},null,8,["modelValue"]),e(n).errors.special_instructions?(u(),m("p",be,d(e(n).errors.special_instructions),1)):_("",!0)])]),s(e(re),null,{default:a(()=>[s(e(le),{"as-child":""},{default:a(()=>[s(e(p),{variant:"outline",type:"button"},{default:a(()=>[...t[9]||(t[9]=[o(" Cancel ",-1)])]),_:1})]),_:1}),s(e(p),{type:"submit",disabled:e(n).processing},{default:a(()=>[e(n).processing?_("",!0):(u(),y(e(h),{key:0,class:"h-4 w-4 mr-2"})),o(" "+d(e(n).processing?"Creating...":"Create Order"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l("div",ve,[s(e(R),null,{default:a(()=>[i.orders.data.length===0?(u(),y(e(J),{key:0},{default:a(()=>[...t[11]||(t[11]=[o(" No orders found. Create your first order to get started. ",-1)])]),_:1})):_("",!0),s(e(L),null,{default:a(()=>[s(e(D),null,{default:a(()=>[s(e(f),{class:"w-[140px]"},{default:a(()=>[...t[12]||(t[12]=[o("#",-1)])]),_:1}),s(e(f),{class:"w-[140px]"},{default:a(()=>[...t[13]||(t[13]=[o("Order Number",-1)])]),_:1}),s(e(f),null,{default:a(()=>[...t[14]||(t[14]=[o("Service",-1)])]),_:1}),s(e(f),null,{default:a(()=>[...t[15]||(t[15]=[o("Status",-1)])]),_:1}),s(e(f),null,{default:a(()=>[...t[16]||(t[16]=[o("Technician",-1)])]),_:1}),s(e(f),null,{default:a(()=>[...t[17]||(t[17]=[o("Due Date",-1)])]),_:1}),s(e(f),null,{default:a(()=>[...t[18]||(t[18]=[o("Price",-1)])]),_:1}),s(e(f),{class:"text-right"},{default:a(()=>[...t[19]||(t[19]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(q),null,{default:a(()=>[(u(!0),m(k,null,S(i.orders.data,(r,F)=>(u(),y(e(D),{key:r.id,class:"hover:bg-muted/50 transition-colors"},{default:a(()=>[s(e(c),{class:"font-medium font-mono"},{default:a(()=>[o(d(F+1),1)]),_:2},1024),s(e(c),{class:"font-medium font-mono"},{default:a(()=>[o(d(r.order_number),1)]),_:2},1024),s(e(c),null,{default:a(()=>[l("div",null,[l("div",ye,d(r.service.name),1),r.special_instructions?(u(),m("div",{key:0,class:"text-xs text-muted-foreground mt-1 truncate max-w-[200px]",title:r.special_instructions},d(r.special_instructions),9,we)):_("",!0)])]),_:2},1024),s(e(c),null,{default:a(()=>[s(e(W),{class:j(g[r.status].class),variant:"secondary"},{default:a(()=>[o(d(g[r.status].label),1)]),_:2},1032,["class"])]),_:2},1024),s(e(c),null,{default:a(()=>[r.technician?(u(),m("span",ke,d(r.technician.name),1)):(u(),m("span",he," Not assigned "))]),_:2},1024),s(e(c),null,{default:a(()=>[l("div",$e,[l("div",Ve,d(V(r.due_date)),1),l("div",Ce,d(b(r.due_date)),1)])]),_:2},1024),s(e(c),{class:"font-semibold text-foreground"},{default:a(()=>[o(" Ksh "+d(parseFloat(r.service.base_price).toFixed(2)),1)]),_:2},1024),s(e(c),{class:"text-right"},{default:a(()=>[s(e(p),{variant:"ghost",size:"sm",class:"gap-2"},{default:a(()=>[s(e(X),{class:"h-4 w-4"}),t[20]||(t[20]=o(" View ",-1))]),_:1})]),_:1})]),_:2},1024))),128))]),_:1})]),_:1}),i.orders.data.length>0?(u(),m("div",Se,[l("div",null," Showing "+d((i.orders.current_page-1)*i.orders.per_page+1)+" to "+d(Math.min(i.orders.current_page*i.orders.per_page,i.orders.total))+" of "+d(i.orders.total)+" orders ",1),l("div",De,[s(e(p),{variant:"outline",size:"sm",disabled:i.orders.current_page===1},{default:a(()=>[...t[21]||(t[21]=[o(" Previous ",-1)])]),_:1},8,["disabled"]),l("span",Ne,"Page "+d(i.orders.current_page)+" of "+d(i.orders.last_page),1),s(e(p),{variant:"outline",size:"sm",disabled:i.orders.current_page===i.orders.last_page},{default:a(()=>[...t[22]||(t[22]=[o(" Next ",-1)])]),_:1},8,["disabled"])])])):_("",!0)]),i.orders.data.length===0?(u(),m("div",Oe,[l("div",je,[s(e(h),{class:"h-10 w-10 text-muted-foreground"})]),t[23]||(t[23]=l("h3",{class:"text-xl font-semibold text-foreground mb-2"},"No orders yet",-1)),t[24]||(t[24]=l("p",{class:"text-muted-foreground mb-6 max-w-sm"}," Create your first order to start tracking your dental laboratory work. ",-1))])):_("",!0)])]),_:1})],64))}});export{Ye as default};
